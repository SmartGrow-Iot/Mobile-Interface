// data/sensors.ts
import { SensorInfo, GroupData } from "../types/Sensor";

export const sensorInfo: Record<string, SensorInfo> = {
  light: {
    id: "light",
    type: "light",
    name: "Light Sensor",
    icon: "â˜€ï¸",
    description: "Monitor light levels for optimal plant growth",
    unit: "%",
    range: { min: 0, max: 100 },
  },
  soil: {
    id: "soil",
    type: "soil",
    name: "Soil Sensor",
    icon: "ğŸŸ«",
    description: "Track soil moisture and nutrient levels",
    unit: "%",
    range: { min: 0, max: 100 },
  },
  airquality: {
    id: "airquality",
    type: "airquality",
    name: "Air Quality Sensor",
    icon: "ğŸŒ¬ï¸",
    description: "Monitor air quality and CO2 levels",
    unit: "ppm",
    range: { min: 0, max: 2000 },
  },
  temperature: {
    id: "temperature",
    type: "temperature",
    name: "Temperature Sensor",
    icon: "ğŸŒ¡ï¸",
    description: "Track ambient temperature",
    unit: "Â°C",
    range: { min: -10, max: 50 },
  },
  humidity: {
    id: "humidity",
    type: "humidity",
    name: "Humidity Sensor",
    icon: "ğŸ’§",
    description: "Monitor relative humidity levels",
    unit: "%",
    range: { min: 0, max: 100 },
  },
};

export const mockGroupData: Record<string, GroupData[]> = {
  light: [
    {
      id: "g1",
      group: "Group 1",
      icon: "ğŸ†",
      value: "80% light",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g2",
      group: "Group 2",
      icon: "ğŸŒ¶ï¸",
      value: "74% light",
      critical: false,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g3",
      group: "Group 3",
      icon: "ğŸ†",
      value: "85% light",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g4",
      group: "Group 4",
      icon: "ğŸ†",
      value: "45% light",
      critical: true,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g5",
      group: "Group 5",
      icon: "ğŸŒ¶ï¸",
      value: "80% light",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g6",
      group: "Group 6",
      icon: "ğŸŒ¶ï¸",
      value: "90% light",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g7",
      group: "Group 7",
      icon: "ğŸŒ¶ï¸",
      value: "35% light",
      critical: true,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g8",
      group: "Group 8",
      icon: "ğŸ†",
      value: "88% light",
      critical: false,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g9",
      group: "Group 9",
      icon: "ğŸŒ¶ï¸",
      value: "42% light",
      critical: true,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
    {
      id: "g10",
      group: "Group 10",
      icon: "ğŸ†",
      value: "92% light",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
  ],
  soil: [
    {
      id: "g1",
      group: "Group 1",
      icon: "ğŸ†",
      value: "80% moisture",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g2",
      group: "Group 2",
      icon: "ğŸŒ¶ï¸",
      value: "74% moisture",
      critical: false,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g3",
      group: "Group 3",
      icon: "ğŸ†",
      value: "85% moisture",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g4",
      group: "Group 4",
      icon: "ğŸ†",
      value: "35% moisture",
      critical: true,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g5",
      group: "Group 5",
      icon: "ğŸŒ¶ï¸",
      value: "80% moisture",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g6",
      group: "Group 6",
      icon: "ğŸŒ¶ï¸",
      value: "90% moisture",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g7",
      group: "Group 7",
      icon: "ğŸŒ¶ï¸",
      value: "75% moisture",
      critical: false,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g8",
      group: "Group 8",
      icon: "ğŸ†",
      value: "88% moisture",
      critical: false,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g9",
      group: "Group 9",
      icon: "ğŸŒ¶ï¸",
      value: "25% moisture",
      critical: true,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
    {
      id: "g10",
      group: "Group 10",
      icon: "ğŸ†",
      value: "92% moisture",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
  ],
  airquality: [
    {
      id: "g1",
      group: "Group 1",
      icon: "ğŸ†",
      value: "420 ppm CO2",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g2",
      group: "Group 2",
      icon: "ğŸŒ¶ï¸",
      value: "380 ppm CO2",
      critical: false,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g3",
      group: "Group 3",
      icon: "ğŸ†",
      value: "450 ppm CO2",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g4",
      group: "Group 4",
      icon: "ğŸ†",
      value: "800 ppm CO2",
      critical: true,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g5",
      group: "Group 5",
      icon: "ğŸŒ¶ï¸",
      value: "400 ppm CO2",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g6",
      group: "Group 6",
      icon: "ğŸŒ¶ï¸",
      value: "360 ppm CO2",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g7",
      group: "Group 7",
      icon: "ğŸŒ¶ï¸",
      value: "440 ppm CO2",
      critical: false,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g8",
      group: "Group 8",
      icon: "ğŸ†",
      value: "390 ppm CO2",
      critical: false,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g9",
      group: "Group 9",
      icon: "ğŸŒ¶ï¸",
      value: "750 ppm CO2",
      critical: true,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
    {
      id: "g10",
      group: "Group 10",
      icon: "ğŸ†",
      value: "410 ppm CO2",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
  ],
  temperature: [
    {
      id: "g1",
      group: "Group 1",
      icon: "ğŸ†",
      value: "24Â°C",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g2",
      group: "Group 2",
      icon: "ğŸŒ¶ï¸",
      value: "28Â°C",
      critical: false,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g3",
      group: "Group 3",
      icon: "ğŸ†",
      value: "25Â°C",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g4",
      group: "Group 4",
      icon: "ğŸ†",
      value: "35Â°C",
      critical: true,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g5",
      group: "Group 5",
      icon: "ğŸŒ¶ï¸",
      value: "29Â°C",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g6",
      group: "Group 6",
      icon: "ğŸŒ¶ï¸",
      value: "27Â°C",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g7",
      group: "Group 7",
      icon: "ğŸŒ¶ï¸",
      value: "30Â°C",
      critical: false,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g8",
      group: "Group 8",
      icon: "ğŸ†",
      value: "23Â°C",
      critical: false,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g9",
      group: "Group 9",
      icon: "ğŸŒ¶ï¸",
      value: "38Â°C",
      critical: true,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
    {
      id: "g10",
      group: "Group 10",
      icon: "ğŸ†",
      value: "26Â°C",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
  ],
  humidity: [
    {
      id: "g1",
      group: "Group 1",
      icon: "ğŸ†",
      value: "65% humidity",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g2",
      group: "Group 2",
      icon: "ğŸŒ¶ï¸",
      value: "60% humidity",
      critical: false,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g3",
      group: "Group 3",
      icon: "ğŸ†",
      value: "70% humidity",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g4",
      group: "Group 4",
      icon: "ğŸ†",
      value: "30% humidity",
      critical: true,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_001",
    },
    {
      id: "g5",
      group: "Group 5",
      icon: "ğŸŒ¶ï¸",
      value: "62% humidity",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g6",
      group: "Group 6",
      icon: "ğŸŒ¶ï¸",
      value: "68% humidity",
      critical: false,
      zone: "Zone B",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g7",
      group: "Group 7",
      icon: "ğŸŒ¶ï¸",
      value: "58% humidity",
      critical: false,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g8",
      group: "Group 8",
      icon: "ğŸ†",
      value: "72% humidity",
      critical: false,
      zone: "Zone D",
      lastUpdated: new Date(),
      esp32Id: "ESP32_002",
    },
    {
      id: "g9",
      group: "Group 9",
      icon: "ğŸŒ¶ï¸",
      value: "25% humidity",
      critical: true,
      zone: "Zone A",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
    {
      id: "g10",
      group: "Group 10",
      icon: "ğŸ†",
      value: "75% humidity",
      critical: false,
      zone: "Zone C",
      lastUpdated: new Date(),
      esp32Id: "ESP32_003",
    },
  ],
};

// Helper functions
export const getSensorInfo = (sensorType: string): SensorInfo | undefined => {
  return sensorInfo[sensorType];
};

export const getGroupDataBySensor = (sensorType: string): GroupData[] => {
  return mockGroupData[sensorType] || [];
};

export const calculateSensorStats = (groups: GroupData[]) => {
  const totalGroups = groups.length;
  const criticalGroups = groups.filter((g) => g.critical).length;

  // Extract numeric values for average calculation
  const numericValues = groups
    .map((g) => {
      const match = g.value.match(/(\d+(?:\.\d+)?)/);
      return match ? parseFloat(match[1]) : 0;
    })
    .filter((v) => v > 0);

  const averageValue =
    numericValues.length > 0
      ? numericValues.reduce((sum, val) => sum + val, 0) / numericValues.length
      : undefined;

  return {
    totalGroups,
    criticalGroups,
    averageValue,
  };
};
