import React, { useState, useEffect } from "react";
import { PlantDetail } from "../types/Plant";
import { apiRequest } from "@/services/api";
import { useLocalSearchParams, useRouter } from "expo-router";

export const mockPlantDetails: Record<string, PlantDetail> = {
  // Chili Plants - Zone A
  "CP-1": {
    id: "CP-1",
    name: "Chili Plant 1",
    image: "🌶️",
    zone: "Zone A",
    datePlanted: "23/5/2024",
    optimalMoisture: "50% - 70%",
    optimalLight: "70% - 80%",
    optimalTemp: "25°C - 30°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "60-90 days to maturity",
    notes:
      "Prefers well-drained soil and benefits from regular feeding during flowering and fruiting stages.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Critical",
        color: "red",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "28°C" },
      { label: "Humidity", value: "60%" },
      { label: "Moisture", value: "40%" },
      { label: "Light", value: "70%" },
      { label: "Wind", value: "5 m/s" },
    ],
  },
  "CP-2": {
    id: "CP-2",
    name: "Chili Plant 2",
    image: "🌶️",
    zone: "Zone A",
    datePlanted: "24/5/2024",
    optimalMoisture: "50% - 70%",
    optimalLight: "70% - 80%",
    optimalTemp: "25°C - 30°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "60-90 days to maturity",
    notes: "Healthy growth with regular watering schedule.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "27°C" },
      { label: "Humidity", value: "62%" },
      { label: "Moisture", value: "80%" },
      { label: "Light", value: "70%" },
      { label: "Wind", value: "4 m/s" },
    ],
  },
  "CP-3": {
    id: "CP-3",
    name: "Chili Plant 3",
    image: "🌶️",
    zone: "Zone A",
    datePlanted: "25/5/2024",
    optimalMoisture: "50% - 70%",
    optimalLight: "70% - 80%",
    optimalTemp: "25°C - 30°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "60-90 days to maturity",
    notes:
      "Currently stressed due to low water levels. Requires immediate attention.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "High",
        color: "orange",
        bg: "#fff3cd",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Critical",
        color: "red",
        bg: "#f8d7da",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "29°C" },
      { label: "Humidity", value: "58%" },
      { label: "Moisture", value: "45%" },
      { label: "Light", value: "85%" },
      { label: "Wind", value: "6 m/s" },
    ],
  },
  "CP-4": {
    id: "CP-4",
    name: "Chili Plant 4",
    image: "🌶️",
    zone: "Zone A",
    datePlanted: "26/5/2024",
    optimalMoisture: "50% - 70%",
    optimalLight: "70% - 80%",
    optimalTemp: "25°C - 30°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "60-90 days to maturity",
    notes: "Excellent growth conditions maintained.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "28°C" },
      { label: "Humidity", value: "60%" },
      { label: "Moisture", value: "78%" },
      { label: "Light", value: "68%" },
      { label: "Wind", value: "3 m/s" },
    ],
  },

  // Chili Plants - Zone B
  "CP-5": {
    id: "CP-5",
    name: "Chili Plant 5",
    image: "🌶️",
    zone: "Zone B",
    datePlanted: "27/5/2024",
    optimalMoisture: "50% - 70%",
    optimalLight: "70% - 80%",
    optimalTemp: "25°C - 30°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "60-90 days to maturity",
    notes: "Critical water shortage detected. Automatic irrigation activated.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "High",
        color: "orange",
        bg: "#fff3cd",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Critical",
        color: "red",
        bg: "#f8d7da",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "30°C" },
      { label: "Humidity", value: "55%" },
      { label: "Moisture", value: "40%" },
      { label: "Light", value: "90%" },
      { label: "Wind", value: "7 m/s" },
    ],
  },
  "CP-6": {
    id: "CP-6",
    name: "Chili Plant 6",
    image: "🌶️",
    zone: "Zone B",
    datePlanted: "28/5/2024",
    optimalMoisture: "50% - 70%",
    optimalLight: "70% - 80%",
    optimalTemp: "25°C - 30°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "60-90 days to maturity",
    notes: "Thriving in current conditions.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "27°C" },
      { label: "Humidity", value: "63%" },
      { label: "Moisture", value: "82%" },
      { label: "Light", value: "72%" },
      { label: "Wind", value: "4 m/s" },
    ],
  },
  "CP-7": {
    id: "CP-7",
    name: "Chili Plant 7",
    image: "🌶️",
    zone: "Zone B",
    datePlanted: "29/5/2024",
    optimalMoisture: "50% - 70%",
    optimalLight: "70% - 80%",
    optimalTemp: "25°C - 30°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "60-90 days to maturity",
    notes: "Good growth rate with optimal environmental conditions.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "28°C" },
      { label: "Humidity", value: "60%" },
      { label: "Moisture", value: "76%" },
      { label: "Light", value: "67%" },
      { label: "Wind", value: "5 m/s" },
    ],
  },
  "CP-8": {
    id: "CP-8",
    name: "Chili Plant 8",
    image: "🌶️",
    zone: "Zone B",
    datePlanted: "30/5/2024",
    optimalMoisture: "50% - 70%",
    optimalLight: "70% - 80%",
    optimalTemp: "25°C - 30°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "60-90 days to maturity",
    notes: "Recent transplant showing excellent adaptation.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "27°C" },
      { label: "Humidity", value: "62%" },
      { label: "Moisture", value: "79%" },
      { label: "Light", value: "69%" },
      { label: "Wind", value: "4 m/s" },
    ],
  },

  // Eggplants - Zone C
  "EP-1": {
    id: "EP-1",
    name: "Eggplant 1",
    image: "🍆",
    zone: "Zone C",
    datePlanted: "23/5/2024",
    optimalMoisture: "60% - 80%",
    optimalLight: "60% - 75%",
    optimalTemp: "22°C - 28°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "70-100 days",
    notes:
      "Requires consistent moisture and warm temperatures for optimal growth.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "25°C" },
      { label: "Humidity", value: "65%" },
      { label: "Moisture", value: "77%" },
      { label: "Light", value: "66%" },
      { label: "Wind", value: "3 m/s" },
    ],
  },
  "EP-2": {
    id: "EP-2",
    name: "Eggplant 2",
    image: "🍆",
    zone: "Zone C",
    datePlanted: "24/5/2024",
    optimalMoisture: "60% - 80%",
    optimalLight: "60% - 75%",
    optimalTemp: "22°C - 28°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "70-100 days",
    notes: "Excellent flowering stage with high fruit set potential.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "24°C" },
      { label: "Humidity", value: "68%" },
      { label: "Moisture", value: "81%" },
      { label: "Light", value: "71%" },
      { label: "Wind", value: "2 m/s" },
    ],
  },
  "EP-3": {
    id: "EP-3",
    name: "Eggplant 3",
    image: "🍆",
    zone: "Zone C",
    datePlanted: "25/5/2024",
    optimalMoisture: "60% - 80%",
    optimalLight: "60% - 75%",
    optimalTemp: "22°C - 28°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "70-100 days",
    notes: "Steady growth with regular monitoring schedule.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "26°C" },
      { label: "Humidity", value: "60%" },
      { label: "Moisture", value: "74%" },
      { label: "Light", value: "64%" },
      { label: "Wind", value: "4 m/s" },
    ],
  },
  "EP-4": {
    id: "EP-4",
    name: "Eggplant 4",
    image: "🍆",
    zone: "Zone C",
    datePlanted: "26/5/2024",
    optimalMoisture: "60% - 80%",
    optimalLight: "60% - 75%",
    optimalTemp: "22°C - 28°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "70-100 days",
    notes: "Premium growing conditions with high yield potential.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "25°C" },
      { label: "Humidity", value: "67%" },
      { label: "Moisture", value: "83%" },
      { label: "Light", value: "73%" },
      { label: "Wind", value: "3 m/s" },
    ],
  },

  // Eggplants - Zone D
  "EP-5": {
    id: "EP-5",
    name: "Eggplant 5",
    image: "🍆",
    zone: "Zone D",
    datePlanted: "27/5/2024",
    optimalMoisture: "60% - 80%",
    optimalLight: "60% - 75%",
    optimalTemp: "22°C - 28°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "70-100 days",
    notes: "Healthy development with consistent care routine.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "24°C" },
      { label: "Humidity", value: "68%" },
      { label: "Moisture", value: "76%" },
      { label: "Light", value: "65%" },
      { label: "Wind", value: "4 m/s" },
    ],
  },
  "EP-6": {
    id: "EP-6",
    name: "Eggplant 6",
    image: "🍆",
    zone: "Zone D",
    datePlanted: "28/5/2024",
    optimalMoisture: "60% - 80%",
    optimalLight: "60% - 75%",
    optimalTemp: "22°C - 28°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "70-100 days",
    notes: "Robust growth with excellent environmental adaptation.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "25°C" },
      { label: "Humidity", value: "65%" },
      { label: "Moisture", value: "79%" },
      { label: "Light", value: "68%" },
      { label: "Wind", value: "3 m/s" },
    ],
  },
  "EP-7": {
    id: "EP-7",
    name: "Eggplant 7",
    image: "🍆",
    zone: "Zone D",
    datePlanted: "29/5/2024",
    optimalMoisture: "60% - 80%",
    optimalLight: "60% - 75%",
    optimalTemp: "22°C - 28°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "70-100 days",
    notes: "Showing signs of stress, monitor closely for any changes.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Warning",
        color: "orange",
        bg: "#fff3cd",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "25°C" },
      { label: "Humidity", value: "67%" },
      { label: "Moisture", value: "78%" },
      { label: "Light", value: "67%" },
      { label: "Wind", value: "5 m/s" },
    ],
  },
  "plant_iKjnBJcBaGTx6LyCXUy2": {
    id: "plant_iKjnBJcBaGTx6LyCXUy2",
    name: "Eggplant 8",
    image: "🍆",
    zone: "Zone D",
    datePlanted: "30/5/2024",
    optimalMoisture: "60% - 80%",
    optimalLight: "60% - 75%",
    optimalTemp: "22°C - 28°C",
    type: "Warm-season fruiting vegetable",
    growthTime: "70-100 days",
    notes: "Latest addition showing promising early growth patterns.",
    thresholds: [
      {
        label: "Light Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#f5f5f5",
        icon: "☀️",
      },
      {
        label: "Water Threshold is",
        value: "Optimal",
        color: "#222",
        bg: "#fff",
        icon: "💧",
      },
    ],
    actuator: "Override Actuator",
    readings: [
      { label: "Temp", value: "24°C" },
      { label: "Humidity", value: "68%" },
      { label: "Moisture", value: "80%" },
      { label: "Light", value: "70%" },
      { label: "Wind", value: "3 m/s" },
    ],
  },
};

// Helper function to get plant details
export const getPlantDetails = (plantId: string): PlantDetail | undefined => {
  return mockPlantDetails[plantId.trim()];
};
